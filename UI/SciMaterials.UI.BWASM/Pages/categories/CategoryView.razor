@page "/categories_storage/{id:guid}"
<style>
    .header-button-divider {
        margin-top: 15px;
        margin-bottom: 15px;
    }
    .header-tabpanel-divider {
        margin-bottom: 15px;
    }
    .card-content-divider {
        margin-top: 15px;
    }
</style>

<MyTitle Title="Current category" />

<div class="header-button-divider">
    <MudButton Variant="Variant.Text" Color="Color.Primary" OnClick="OnBackClick">Back</MudButton>
</div>

@foreach (var element in _Elements)
{
    <div class="header-tabpanel-divider">
        <MudTabs Color="Color.Transparent" Rounded="true" AlwaysShowScrollButtons="true" Class="mt-4">
            <MudTabPanel Text="@State.Value.Categories.FirstOrDefault(x => x.Id.Equals(@element.ParentId))?.Name"
                         OnClick="() => OnCategoryClick(element.ParentId)"/>
        </MudTabs>
    </div>
    
    @if (_Elements is null)
    {
        <MudItem xs="12" sm="6" md="4" lg="3" xl="2" Style="width: 100%">
            <MudCard>
                <MudCardHeader>
                    <CardHeaderContent>
                        <MudSkeleton SkeletonType="SkeletonType.Rectangle" Width="50px" Height="50px" />
                    </CardHeaderContent>
                </MudCardHeader>
                <MudDivider/>
                <MudStack Row="true" Justify="Justify.SpaceAround" >
                    <MudSkeleton SkeletonType="SkeletonType.Rectangle" Width="50px" Height="50px" />
                    <MudSkeleton SkeletonType="SkeletonType.Rectangle" Width="50px" Height="50px" />
                    <MudSkeleton SkeletonType="SkeletonType.Rectangle" Width="50px" Height="50px" />
                </MudStack>
                <MudCardActions>
                    <MudSkeleton SkeletonType="SkeletonType.Rectangle" Width="50px" Height="50px" />
                </MudCardActions>
            </MudCard>
        </MudItem>
    }
    else
    {
        <MudItem xs="12" sm="6" md="4" lg="3" xl="2" Style="width: 100%">
            <MudCard>
                <MudCardMedia Image="@_Icon_CSharp" Height="200" />
                <MudCardHeader>
                    <CardHeaderContent>
                        <MudText Align="Align.Center" Typo="Typo.h6" Color="Color.Info">@element.Name</MudText>
                    </CardHeaderContent>
                </MudCardHeader>
                <MudDivider/>
                <div class="card-content-divider">
                    <MudCardContent >
                        <MudText Align="Align.Center" Typo="Typo.body1" Color="Color.Dark">@element.Description</MudText>
                    </MudCardContent>
                    <MudCardContent >
                        <MudText Align="Align.Center" Typo="Typo.body2" Color="Color.Dark">Created At: @element.CreatedAt</MudText>
                    </MudCardContent>
                </div>
            </MudCard>
        </MudItem>
    }
}

